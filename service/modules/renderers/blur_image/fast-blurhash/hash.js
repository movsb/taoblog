(()=>{var y=new Uint8Array(128);for(let E=0;E<83;E++)y["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~".charCodeAt(E)]=E;var W=(E,K,M)=>{let N=0;while(K<M)N*=83,N+=y[E.charCodeAt(K++)];return N},I=Math.pow,D=Math.PI,m=D*2,H=3294.6,w=269.025,b=(E)=>E>10.31475?I(E/w+0.052132,2.4):E/H,R=(E)=>~~(E>0.00001227?w*I(E,0.416666)-13.025:E*H+1),f=(E)=>(E<0?-1:1)*E*E,j=(E)=>{E+=D/2;while(E>D)E-=m;let K=1.27323954*E-0.405284735*f(E);return 0.225*(f(K)-K)+K};function c(E){let K=W(E,2,6);return[K>>16,K>>8&255,K&255]}function p(E,K,M,N){let k=W(E,0,1),Q=k%9+1,U=~~(k/9)+1,L=Q*U,J=0,Z=0,_=0,$=0,q=0,C=0,S=0,V=0,X=0,z=0,F=0,G=0,T=(W(E,1,2)+1)/13446*(N|1),A=new Float64Array(L*3),v=c(E);for(J=0;J<3;J++)A[J]=b(v[J]);for(J=1;J<L;J++)G=W(E,4+J*2,6+J*2),A[J*3]=f(~~(G/361)-9)*T,A[J*3+1]=f(~~(G/19)%19-9)*T,A[J*3+2]=f(G%19-9)*T;let P=new Float64Array(U*M),Y=new Float64Array(Q*K);for(Z=0;Z<U;Z++)for($=0;$<M;$++)P[Z*M+$]=j(D*$*Z/M);for(J=0;J<Q;J++)for(_=0;_<K;_++)Y[J*K+_]=j(D*_*J/K);let B=K*4,O=new Uint8ClampedArray(B*M);for($=0;$<M;$++)for(_=0;_<K;_++){q=C=S=0;for(Z=0;Z<U;Z++){X=P[Z*M+$];for(J=0;J<Q;J++)V=Y[J*K+_]*X,z=(J+Z*Q)*3,q+=A[z]*V,C+=A[z+1]*V,S+=A[z+2]*V}F=4*_+$*B,O[F]=R(q),O[F+1]=R(C),O[F+2]=R(S),O[F+3]=255}return O}async function g(E,K,M){let N=document.createElement("canvas");N.width=K,N.height=M;let k=N.getContext("2d"),Q=k.createImageData(K,M);return Q.data.set(E),k.putImageData(Q,0,0),new Promise((U,L)=>{N.toBlob((J)=>{if(!J)return L("图片转换失败。");return U(J)})})}async function n(E,K,M,N,k){let Q=p(E,K,M,1),U=await g(Q,N,k);return URL.createObjectURL(U)}window.createBlurImageFromHash=n;})();
