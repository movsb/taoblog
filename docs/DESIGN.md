# 一些设计与取舍

## 备份

### GIT 同步

自从增加了碎碎念功能后，碎碎念几乎都是在网页上发表的，不会像往常一样全部在本地用 VsCode + Git 编写。
尽管已经每天定时对数据库做全量备份，但是数据库作为一个二进制文件，整体是不适合作为 git 进仓库归档的。
所以接下来是想描述如何对此情况备份。

备份程序依旧保持一天一次备份，备份成功后，扫表，如果有在上次备份成功之后有更新的，则认为是需要进仓库的。

一些注意事项：

* 在单次备份周期内多次更新只会被算作一次。除非缩短备份周期。

可能的优化项：

* 对所有对数据库有写操作的行为 debounce/固定期限 后置 flag 表示有“脏” 数据，需要更新。
  这样可以做到数据库准实时同步。

需要确保的问题：

* 如果把备份程序的备份周期缩短，则有可能丢失部分更新。因为检查更新记录的周期随备份周期缩短了。
* 如果延长，则判断更新时间如果大于本地的最后修改时间，则忽略更新。
